<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#DE3358"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-04-23T21:29:49.8124033"><title>Dialogue | MCCompiled Wiki</title><script type="application/json" id="virtual-toc-data">[{"id":"syntax","level":0,"title":"Syntax","anchor":"#syntax"},{"id":"defining-dialogue-scenes","level":0,"title":"Defining Dialogue Scenes","anchor":"#defining-dialogue-scenes"},{"id":"opening-changing-dialogue","level":0,"title":"Opening/Changing Dialogue","anchor":"#opening-changing-dialogue"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="icon" type="image/x-icon" sizes="16x16" href="images/favicon.ico"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Dialogue | MCCompiled Wiki"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MCCompiled Wiki Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18/dialogue.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Dialogue | MCCompiled Wiki"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18/dialogue.html#webpage",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18/dialogue.html",
    "name": "Dialogue | MCCompiled Wiki",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/#website",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/",
    "name": "MCCompiled Wiki Help"
}</script><!-- End Schema.org --></head><body data-id="Dialogue" data-main-title="Dialogue" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Language.md|Language///Runtime.md|Runtime///Add-On-Features.md|Add-On Features"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MCCompiled Wiki 1.18 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Dialogue" id="Dialogue.md">Dialogue</h1><p id="-i44odl_287">NPC dialogue is always a pain to write; localizing text, creating naming conventions, and then having to connect it with commands elsewhere in your project takes an unusually long amount of time.</p><p id="-i44odl_289">MCCompiled contains features for defining, displaying, and running code right out of dialogue, which as a result can be automated using <a href="metaprogramming.html" id="-i44odl_290" data-tooltip="The preprocessor is an incredibly powerful tool, so this page goes over how to use it in a more advanced way to both generate and use functions and values with fully dynamic names.">metaprogramming</a>, or automatically localized with <a href="localization.html" id="-i44odl_291" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the…">localization.</a></p><section class="chapter"><h2 id="syntax" data-toc="syntax">Syntax</h2><p id="-i44odl_292">The <code class="code" id="-i44odl_293">dialogue</code> command is slightly different from the vanilla version of the command; most notably being the addition of <code class="code" id="-i44odl_294">dialogue new</code>. This syntax allows you to define a scene.</p><ul class="list _bullet" id="-i44odl_295"><li class="list__item" id="-i44odl_296"><p><code class="code" id="-i44odl_297">dialogue new &lt;string: scene name&gt; {...}</code></p></li><li class="list__item" id="-i44odl_298"><p><code class="code" id="-i44odl_299">dialogue open &lt;npc&gt; &lt;player&gt; [string: scene name]</code></p></li><li class="list__item" id="-i44odl_300"><p><code class="code" id="-i44odl_301">dialogue change &lt;npc&gt; &lt;string: scene name&gt; [player]</code></p></li></ul></section><section class="chapter"><h2 id="defining-dialogue-scenes" data-toc="defining-dialogue-scenes">Defining Dialogue Scenes</h2><p id="-i44odl_302">A page of dialogue is called a &quot;scene&quot; in Minecraft. If you're familiar with writing dialogue, this will immediately ring a bell. Defining dialogue is made to be as easy as possible, and as closely integrated with the language as possible.</p><p id="-i44odl_303">Let's begin with the <code class="code" id="-i44odl_304">dialogue new</code> subcommand, which defines a new scene. The command must immediately be followed by a block; however, the block does not contain regular statements. Each line in the block must be a valid field followed by a comma.</p><div class="code-block" data-lang="ts">
dialogue new &quot;exampleDialogue&quot; {
    name: &quot;NPC Name&quot;
    text: &quot;Why, hello there traveller.&quot;
    button: &quot;Hello!&quot; {
        print &quot;The man gives you six gold-nuggets to begin trading with.&quot;
        give @i gold_nugget 6
    }
    button: &quot;Goodbye!&quot; {}
}
</div><section class="chapter"><h3 id="forward-declaration" data-toc="forward-declaration">Forward Declaration...?</h3><p id="-i44odl_306">Since MCCompiled doesn't yet have two-pass compilation, it was easier to <span class="control" id="-i44odl_307">disable validation entirely for dialogue names</span>. This means it's possible to misspell the names of defined dialogue, but it's also possible to use dialogue defined externally, or create circular dialogues.</p><aside class="prompt" data-type="tip" data-title="" id="-i44odl_308"><p id="-i44odl_309">This concept doesn't carry over to other parts of the language. For functions, you have to use <a href="attributes.html#partial_examples" id="-i44odl_310" data-tooltip="Partial functions are useful with metaprogramming or forward declaration, where you may want to use a function before its actual implementation. The following example shows how a function can be defined in two different places with their results merged. function partial example {…"><code class="code" id="-i44odl_311">partial</code></a> attribute to forward-declare them.</p></aside></section><section class="chapter"><h3 id="available-fields" data-toc="available-fields">Available Fields</h3><p id="-i44odl_312">All text in dialogue fields support <a href="localization.html" id="-i44odl_313" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the…">localization</a>, if enabled. The fields that can be specified in dialogue definitions are as follows:</p><dl id="-i44odl_314" data-style="title-top"><dt id="-i44odl_315" data-expandable="false">NPC Name</dt><dd><p id="-i44odl_317">Sets the name of the NPC showing this dialogue.</p><ul class="list _bullet" id="-i44odl_318"><li class="list__item" id="-i44odl_319"><p><code class="code" id="-i44odl_320">name: &lt;string: name&gt;</code></p></li></ul></dd><dt id="-i44odl_321" data-expandable="false">Text</dt><dd><p id="-i44odl_323">Sets the text in the dialogue. This field supports placing <code class="code" id="-i44odl_324">\n</code> to represent a new-line.</p><ul class="list _bullet" id="-i44odl_325"><li class="list__item" id="-i44odl_326"><p><code class="code" id="-i44odl_327">text: &lt;string: text&gt;</code></p></li></ul></dd><dt id="-i44odl_328" data-expandable="false">Event: On Open</dt><dd><p id="-i44odl_330">The code to run when the dialogue is opened. Supports full MCCompiled code. The selector <code class="code" id="-i44odl_331">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-i44odl_332"><li class="list__item" id="-i44odl_333"><p><code class="code" id="-i44odl_334">onOpen: { ... }</code></p></li></ul></dd><dt id="-i44odl_335" data-expandable="false">Event: On Close</dt><dd><p id="-i44odl_337">The code to run when the dialogue is closed. Supports full MCCompiled code. The selector <code class="code" id="-i44odl_338">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-i44odl_339"><li class="list__item" id="-i44odl_340"><p><code class="code" id="-i44odl_341">onClose: { ... }</code></p></li></ul></dd><dt id="-i44odl_342" data-expandable="false">Button</dt><dd><p id="-i44odl_344">Adds a button to the dialogue with a name and action to perform when clicked. Supports all MCCompiled code. The selector <code class="code" id="-i44odl_345">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-i44odl_346"><li class="list__item" id="-i44odl_347"><p><code class="code" id="-i44odl_348">button: &lt;string: text&gt; { ... }</code></p></li></ul></dd></dl><aside class="prompt" data-type="note" data-title="Why @s instead of @i?" id="-i44odl_349"><p id="-i44odl_350">When designing the language, there were lots of problems that arose when trying to combine the programmer's intuition <span class="emphasis" id="-i44odl_351">(&quot;@i should be valid here, right?&quot;)</span> with the compiler's various optimizations.</p><p id="-i44odl_352">The selector fell out-of-scope way more than what was reasonable, so it ended up being best to wrap all the code in an <code class="code" id="-i44odl_353">execute as @i at @s ...</code> internally.</p></aside></section></section><section class="chapter"><h2 id="opening-changing-dialogue" data-toc="opening-changing-dialogue">Opening/Changing Dialogue</h2><p id="-i44odl_354">Once dialogue has been defined, it can be applied to an NPC so that it can be displayed when the NPC is interacted with, or shown to a player manually. This is done using the <code class="code" id="-i44odl_355">dialogue change</code> and <code class="code" id="-i44odl_356">dialogue open</code> subcommands, respectively.</p><div class="code-block" data-lang="ts">
dialogue new &quot;abc123&quot; { ... }

// same as vanilla!
dialogue open @e[type=npc,name=Milton] @s &quot;abc123&quot;
</div><aside class="prompt" data-type="tip" data-title="" id="-i44odl_358"><p id="-i44odl_359">This is identical to the behavior of the vanilla command; no additional learning is needed.</p></aside></section><div class="last-modified">Last modified: 24 April 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="add-on-features.html" class="navigation-links__prev">Add-On Features</a><a href="playsound.html" class="navigation-links__next">Playsound</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>