<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#DE3358"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-05-10T08:03:13.4161276"><title>Dialogue | MCCompiled Wiki</title><script type="application/json" id="virtual-toc-data">[{"id":"syntax","level":0,"title":"Syntax","anchor":"#syntax"},{"id":"defining-dialogue-scenes","level":0,"title":"Defining Dialogue Scenes","anchor":"#defining-dialogue-scenes"},{"id":"opening-changing-dialogue","level":0,"title":"Opening/Changing Dialogue","anchor":"#opening-changing-dialogue"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="icon" type="image/x-icon" sizes="16x16" href="images/favicon.ico"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Dialogue | MCCompiled Wiki"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MCCompiled Wiki Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18.1/dialogue.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Dialogue | MCCompiled Wiki"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18.1/dialogue.html#webpage",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.18.1/dialogue.html",
    "name": "Dialogue | MCCompiled Wiki",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/#website",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/",
    "name": "MCCompiled Wiki Help"
}</script><!-- End Schema.org --></head><body data-id="Dialogue" data-main-title="Dialogue" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Language.md|Language///Runtime.md|Runtime///Add-On-Features.md|Add-On Features"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MCCompiled Wiki 1.18.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Dialogue" id="Dialogue.md">Dialogue</h1><p id="-2z7ca4_17">NPC dialogue is always a pain to write; localizing text, creating naming conventions, and then having to connect it with commands elsewhere in your project takes an unusually long amount of time.</p><p id="-2z7ca4_19">MCCompiled contains features for defining, displaying, and running code right out of dialogue, which as a result can be automated using <a href="metaprogramming.html" id="-2z7ca4_20" data-tooltip="The preprocessor is an incredibly powerful tool, so this page goes over how to use it in a more advanced way to both generate and use functions and values with fully dynamic names.">metaprogramming</a>, or automatically localized with <a href="localization.html" id="-2z7ca4_21" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the…">localization.</a></p><section class="chapter"><h2 id="syntax" data-toc="syntax">Syntax</h2><p id="-2z7ca4_22">The <code class="code" id="-2z7ca4_23">dialogue</code> command is slightly different from the vanilla version of the command; most notably being the addition of <code class="code" id="-2z7ca4_24">dialogue new</code>. This syntax allows you to define a scene.</p><ul class="list _bullet" id="-2z7ca4_25"><li class="list__item" id="-2z7ca4_26"><p><code class="code" id="-2z7ca4_27">dialogue new &lt;string: scene name&gt; {...}</code></p></li><li class="list__item" id="-2z7ca4_28"><p><code class="code" id="-2z7ca4_29">dialogue open &lt;npc&gt; &lt;player&gt; [string: scene name]</code></p></li><li class="list__item" id="-2z7ca4_30"><p><code class="code" id="-2z7ca4_31">dialogue change &lt;npc&gt; &lt;string: scene name&gt; [player]</code></p></li></ul></section><section class="chapter"><h2 id="defining-dialogue-scenes" data-toc="defining-dialogue-scenes">Defining Dialogue Scenes</h2><p id="-2z7ca4_32">A page of dialogue is called a &quot;scene&quot; in Minecraft. If you're familiar with writing dialogue, this will immediately ring a bell. Defining dialogue is made to be as easy as possible, and as closely integrated with the language as possible.</p><p id="-2z7ca4_33">Let's begin with the <code class="code" id="-2z7ca4_34">dialogue new</code> subcommand, which defines a new scene. The command must immediately be followed by a block; however, the block does not contain regular statements. Each line in the block must be a valid field followed by a comma.</p><div class="code-block" data-lang="ts">
dialogue new &quot;exampleDialogue&quot; {
    name: &quot;NPC Name&quot;
    text: &quot;Why, hello there traveller.&quot;
    button: &quot;Hello!&quot; {
        print &quot;The man gives you six gold-nuggets to begin trading with.&quot;
        give @i gold_nugget 6
    }
    button: &quot;Goodbye!&quot; {}
}
</div><section class="chapter"><h3 id="forward-declaration" data-toc="forward-declaration">Forward Declaration...?</h3><p id="-2z7ca4_36">Since MCCompiled doesn't yet have two-pass compilation, it was easier to <span class="control" id="-2z7ca4_37">disable validation entirely for dialogue names</span>. This means it's possible to misspell the names of defined dialogue, but it's also possible to use dialogue defined externally, or create circular dialogues.</p><aside class="prompt" data-type="tip" data-title="" id="-2z7ca4_38"><p id="-2z7ca4_39">This concept doesn't carry over to other parts of the language. For functions, you have to use <a href="attributes.html#partial_examples" id="-2z7ca4_40" data-tooltip="Partial functions are useful with metaprogramming or forward declaration, where you may want to use a function before its actual implementation. The following example shows how a function can be defined in two different places with their results merged. function partial example {…"><code class="code" id="-2z7ca4_41">partial</code></a> attribute to forward-declare them.</p></aside></section><section class="chapter"><h3 id="available-fields" data-toc="available-fields">Available Fields</h3><p id="-2z7ca4_42">All text in dialogue fields support <a href="localization.html" id="-2z7ca4_43" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the…">localization</a>, if enabled. The fields that can be specified in dialogue definitions are as follows:</p><dl id="-2z7ca4_44" data-style="title-top"><dt id="-2z7ca4_45" data-expandable="false">NPC Name</dt><dd><p id="-2z7ca4_47">Sets the name of the NPC showing this dialogue.</p><ul class="list _bullet" id="-2z7ca4_48"><li class="list__item" id="-2z7ca4_49"><p><code class="code" id="-2z7ca4_50">name: &lt;string: name&gt;</code></p></li></ul></dd><dt id="-2z7ca4_51" data-expandable="false">Text</dt><dd><p id="-2z7ca4_53">Sets the text in the dialogue. This field supports placing <code class="code" id="-2z7ca4_54">\n</code> to represent a new-line.</p><ul class="list _bullet" id="-2z7ca4_55"><li class="list__item" id="-2z7ca4_56"><p><code class="code" id="-2z7ca4_57">text: &lt;string: text&gt;</code></p></li></ul></dd><dt id="-2z7ca4_58" data-expandable="false">Event: On Open</dt><dd><p id="-2z7ca4_60">The code to run when the dialogue is opened. Supports full MCCompiled code. The selector <code class="code" id="-2z7ca4_61">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-2z7ca4_62"><li class="list__item" id="-2z7ca4_63"><p><code class="code" id="-2z7ca4_64">onOpen: { ... }</code></p></li></ul></dd><dt id="-2z7ca4_65" data-expandable="false">Event: On Close</dt><dd><p id="-2z7ca4_67">The code to run when the dialogue is closed. Supports full MCCompiled code. The selector <code class="code" id="-2z7ca4_68">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-2z7ca4_69"><li class="list__item" id="-2z7ca4_70"><p><code class="code" id="-2z7ca4_71">onClose: { ... }</code></p></li></ul></dd><dt id="-2z7ca4_72" data-expandable="false">Button</dt><dd><p id="-2z7ca4_74">Adds a button to the dialogue with a name and action to perform when clicked. Supports all MCCompiled code. The selector <code class="code" id="-2z7ca4_75">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _bullet" id="-2z7ca4_76"><li class="list__item" id="-2z7ca4_77"><p><code class="code" id="-2z7ca4_78">button: &lt;string: text&gt; { ... }</code></p></li></ul></dd></dl><aside class="prompt" data-type="note" data-title="Why @s instead of @i?" id="-2z7ca4_79"><p id="-2z7ca4_80">When designing the language, there were lots of problems that arose when trying to combine the programmer's intuition <span class="emphasis" id="-2z7ca4_81">(&quot;@i should be valid here, right?&quot;)</span> with the compiler's various optimizations.</p><p id="-2z7ca4_82">The selector fell out-of-scope way more than what was reasonable, so it ended up being best to wrap all the code in an <code class="code" id="-2z7ca4_83">execute as @i at @s ...</code> internally.</p></aside></section></section><section class="chapter"><h2 id="opening-changing-dialogue" data-toc="opening-changing-dialogue">Opening/Changing Dialogue</h2><p id="-2z7ca4_84">Once dialogue has been defined, it can be applied to an NPC so that it can be displayed when the NPC is interacted with, or shown to a player manually. This is done using the <code class="code" id="-2z7ca4_85">dialogue change</code> and <code class="code" id="-2z7ca4_86">dialogue open</code> subcommands, respectively.</p><div class="code-block" data-lang="ts">
dialogue new &quot;abc123&quot; { ... }

// same as vanilla!
dialogue open @e[type=npc,name=Milton] @s &quot;abc123&quot;
</div><aside class="prompt" data-type="tip" data-title="" id="-2z7ca4_88"><p id="-2z7ca4_89">This is identical to the behavior of the vanilla command; no additional learning is needed.</p></aside></section><div class="last-modified">Last modified: 10 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="add-on-features.html" class="navigation-links__prev">Add-On Features</a><a href="playsound.html" class="navigation-links__next">Playsound</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>