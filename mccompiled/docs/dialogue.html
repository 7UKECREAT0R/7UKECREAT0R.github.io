<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-colors-preset="contrast" data-primary-color="#DE3358"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-02-26T11:10:47.3242076"><title>Dialogue | MCCompiled Wiki</title><script type="application/json" id="virtual-toc-data">[{"id":"syntax","level":0,"title":"Syntax","anchor":"#syntax"},{"id":"defining-dialogue-scenes","level":0,"title":"Defining Dialogue Scenes","anchor":"#defining-dialogue-scenes"},{"id":"opening-changing-dialogue","level":0,"title":"Opening/Changing Dialogue","anchor":"#opening-changing-dialogue"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet"><link rel="icon" type="image/x-icon" sizes="16x16" href="images/favicon.ico"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Dialogue | MCCompiled Wiki"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MCCompiled Wiki Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.17/dialogue.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Dialogue | MCCompiled Wiki"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.17/dialogue.html#webpage",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/1.17/dialogue.html",
    "name": "Dialogue | MCCompiled Wiki",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/#website",
    "url": "https://lukecreator.dev/mccompiled/docs/mccompiled/docs/",
    "name": "MCCompiled Wiki Help"
}</script><!-- End Schema.org --></head><body data-id="Dialogue" data-main-title="Dialogue" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Language.md|Language///Runtime.md|Runtime///Add-On-Features.md|Add-On Features"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MCCompiled Wiki 1.17 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Dialogue" id="Dialogue.md">Dialogue</h1><p id="f1114996_345">NPC dialogue is always a pain to write; localizing text, creating naming conventions, and then having to connect it with commands elsewhere in your project takes an unusually long amount of time.</p><p id="f1114996_347">MCCompiled contains features for defining, displaying, and running code right out of dialogue, which as a result can be automated using <a href="metaprogramming.html" id="f1114996_348" data-tooltip="The preprocessor is an incredibly powerful tool, so this page goes over how to use it in a more advanced way to both generate and use functions and values with fully dynamic names.">metaprogramming</a>, or automatically localized with <a href="localization.html" id="f1114996_349" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the&hellip;">localization.</a></p><section class="chapter"><h2 id="syntax" data-toc="syntax">Syntax</h2><p id="f1114996_350">The <code class="code" id="f1114996_351">dialogue</code> command is slightly different from the vanilla version of the command; most notably being the addition of <code class="code" id="f1114996_352">dialogue new</code>. This syntax allows you to define a scene.</p><ul class="list _ul" id="f1114996_353"><li class="list__item" id="f1114996_354"><p><code class="code" id="f1114996_355">dialogue new &lt;string: scene name&gt; {...}</code></p></li><li class="list__item" id="f1114996_356"><p><code class="code" id="f1114996_357">dialogue open &lt;npc&gt; &lt;player&gt; [string: scene name]</code></p></li><li class="list__item" id="f1114996_358"><p><code class="code" id="f1114996_359">dialogue change &lt;npc&gt; &lt;string: scene name&gt; [player]</code></p></li></ul></section><section class="chapter"><h2 id="defining-dialogue-scenes" data-toc="defining-dialogue-scenes">Defining Dialogue Scenes</h2><p id="f1114996_360">A page of dialogue is called a &quot;scene&quot; in Minecraft. If you're familiar with writing dialogue, this will immediately ring a bell. Defining dialogue is made to be as easy as possible, and as closely integrated with the language as possible.</p><p id="f1114996_361">Let's begin with the <code class="code" id="f1114996_362">dialogue new</code> subcommand, which defines a new scene. The command must immediately be followed by a block; however, the block does not contain regular statements. Each line in the block must be a valid field followed by a comma.</p><div class="code-block" data-lang="ts">
dialogue new &quot;exampleDialogue&quot; {
    name: &quot;NPC Name&quot;
    text: &quot;Why, hello there traveller.&quot;
    button: &quot;Hello!&quot; {
        print &quot;The man gives you six gold-nuggets to begin trading with.&quot;
        give @i gold_nugget 6
    }
    button: &quot;Goodbye!&quot; {}
}
</div><section class="chapter"><h3 id="forward-declaration" data-toc="forward-declaration">Forward Declaration...?</h3><p id="f1114996_364">Since MCCompiled doesn't yet have two-pass compilation, it was easier to <span class="control" id="f1114996_365">disable validation entirely for dialogue names</span>. This means it's possible to misspell the names of defined dialogue, but it's also possible to use dialogue defined externally, or create circular dialogues.</p><aside class="prompt" data-type="tip" data-title="" id="f1114996_366"><p id="f1114996_367">This concept doesn't carry over to other parts of the language. For functions, you have to use <a href="attributes.html#partial_examples" id="f1114996_368" data-tooltip="Partial functions are useful with metaprogramming or forward declaration, where you may want to use a function before its actual implementation. The following example shows how a function can be defined in two different places with their results merged. function partial example {&hellip;"><code class="code" id="f1114996_369">partial</code></a> attribute to forward-declare them.</p></aside></section><section class="chapter"><h3 id="available-fields" data-toc="available-fields">Available Fields</h3><p id="f1114996_370">All text in dialogue fields support <a href="localization.html" id="f1114996_371" data-tooltip="When writing code that is going to be deployed to more than one language, it's necessary to use a .lang file to hold the keys/values for all pieces of text that show up in the project. MCCompiled offers support for automatically generating .lang files and insetting keys into the&hellip;">localization</a>, if enabled. The fields that can be specified in dialogue definitions are as follows:</p><dl id="f1114996_372" data-style="title-top"><dt id="f1114996_373" data-expandable="false">NPC Name</dt><dd><p id="f1114996_375">Sets the name of the NPC showing this dialogue.</p><ul class="list _ul" id="f1114996_376"><li class="list__item" id="f1114996_377"><p><code class="code" id="f1114996_378">name: &lt;string: name&gt;</code></p></li></ul></dd><dt id="f1114996_379" data-expandable="false">Text</dt><dd><p id="f1114996_381">Sets the text in the dialogue. This field supports placing <code class="code" id="f1114996_382">\n</code> to represent a new-line.</p><ul class="list _ul" id="f1114996_383"><li class="list__item" id="f1114996_384"><p><code class="code" id="f1114996_385">text: &lt;string: text&gt;</code></p></li></ul></dd><dt id="f1114996_386" data-expandable="false">Event: On Open</dt><dd><p id="f1114996_388">The code to run when the dialogue is opened. Supports full MCCompiled code. The selector <code class="code" id="f1114996_389">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _ul" id="f1114996_390"><li class="list__item" id="f1114996_391"><p><code class="code" id="f1114996_392">onOpen: { ... }</code></p></li></ul></dd><dt id="f1114996_393" data-expandable="false">Event: On Close</dt><dd><p id="f1114996_395">The code to run when the dialogue is closed. Supports full MCCompiled code. The selector <code class="code" id="f1114996_396">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _ul" id="f1114996_397"><li class="list__item" id="f1114996_398"><p><code class="code" id="f1114996_399">onClose: { ... }</code></p></li></ul></dd><dt id="f1114996_400" data-expandable="false">Button</dt><dd><p id="f1114996_402">Adds a button to the dialogue with a name and action to perform when clicked. Supports all MCCompiled code. The selector <code class="code" id="f1114996_403">@s</code> will refer to the player who ran the dialogue.</p><ul class="list _ul" id="f1114996_404"><li class="list__item" id="f1114996_405"><p><code class="code" id="f1114996_406">button: &lt;string: text&gt; { ... }</code></p></li></ul></dd></dl><aside class="prompt" data-type="note" data-title="Why @s instead of @i?" id="f1114996_407"><p id="f1114996_408">When designing the language, there were lots of problems that arose when trying to combine the programmer's intuition <span class="emphasis" id="f1114996_409">(&quot;@i should be valid here, right?&quot;)</span> with the compiler's various optimizations.</p><p id="f1114996_410">The selector fell out-of-scope way more than what was reasonable, so it ended up being best to wrap all the code in an <code class="code" id="f1114996_411">execute as @i at @s ...</code> internally.</p></aside></section></section><section class="chapter"><h2 id="opening-changing-dialogue" data-toc="opening-changing-dialogue">Opening/Changing Dialogue</h2><p id="f1114996_412">Once dialogue has been defined, it can be applied to an NPC so that it can be displayed when the NPC is interacted with, or shown to a player manually. This is done using the <code class="code" id="f1114996_413">dialogue change</code> and <code class="code" id="f1114996_414">dialogue open</code> subcommands, respectively.</p><div class="code-block" data-lang="ts">
dialogue new &quot;abc123&quot; { ... }

// same as vanilla!
dialogue open @e[type=npc,name=Milton] @s &quot;abc123&quot;
</div><aside class="prompt" data-type="tip" data-title="" id="f1114996_416"><p id="f1114996_417">This is identical to the behavior of the vanilla command; no additional learning is needed.</p></aside></section><div class="last-modified">Last modified: 26 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="add-on-features.html" class="navigation-links__prev">Add-On Features</a><a href="playsound.html" class="navigation-links__next">Playsound</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>